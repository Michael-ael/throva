"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6820],{82953:function(n,e,r){r.d(e,{c:function(){return a},t:function(){return o}});var t=r(94738);function a(){(0,t.aN)({name:t.s6.OnboardingFEClearFlowStarted,properties:{sourceScreen:"curtain"}})}function o(n){var e=n.Response,r=n.errorCode;(0,t.aN)({name:t.s6.OnboardingFEClearFlowEnded,properties:{Response:e,errorCode:r}})}},45751:function(n,e,r){r.d(e,{I:function(){return R},x:function(){return A}});var t,a,o=r(10253),i=r(35944),s=r(70917),c=r(11163),u=r(67294),l=r(46658),d=r(82953),p=r(98037),g=r(16888),f=r(22783),v=r(64728);(a=t||(t={})).Success="SUCCESS",a.Fail="FAIL",a.AwaitingUserInput="AWAITING_USER_INPUT",a.ProcessingData="PROCESSING_DATA",a.Expired="EXPIRED",a.AwaitingManualReview="AWAITING_MANUAL_REVIEW",a.ManualSuccess="MANUAL_SUCCESS",a.ManualFail="MANUAL_FAIL",a.Other="OTHER";var m=r(91325),b=r(5006),h=r(66316),C=r(39338),Z=r(20117),x=function(n){var e=n.title,r=n.description,t=(0,c.useRouter)().replace;return(0,i.BX)("div",{css:(0,s.iv)("padding-top:80px;display:flex;flex-direction:column;"),children:[(0,i.tZ)(Z.b,{variant:"error",title:e,description:r}),(0,i.tZ)(C.w,{onNext:function(){return t("/signup")},nextButtonLabel:"Dismiss",bottom:!0})]})},w=r(45900),y=r(62734),S=r(84071),E=y.Z_().min(8,"Password must be at least 8 characters"),O=function(n){var e,r=n.sessionToken,t=n.storedEmail,a=n.onLoginClearUser,c=(0,u.useRef)(null),l=(0,u.useState)(t),d=l[0],p=l[1],g=(0,u.useState)(),v=g[0],m=g[1],h=(0,u.useState)(),Z=h[0],x=h[1],y=(0,o.Z)((0,b.r5)(f.et,{onFailure:function(n,e){var r=(0,o.Z)(e,1)[0];x((0,b.e$)(n)),(0,S.mo)(n,r)},onSuccess:function(n){!1===n.available&&x("This email is already taken. Try another one.")}}),2),O=y[0],N=y[1],k=function(n){N.reset(),x(void 0),p(n)},L=E.safeParse(v).success&&(null===(e=N.data)||void 0===e?void 0:e.available)===!0,P=function(){d&&v&&a({email:d,password:v,sessionToken:r})};return(0,i.BX)("div",{css:(0,s.iv)("display:flex;flex-direction:column;padding-top:80px;width:600px;"),children:[(0,i.tZ)("h1",{css:(0,s.iv)("font:var(--font-h3);margin:0;"),children:"Create a Public account"}),(0,i.tZ)("p",{css:(0,s.iv)("font:var(--font-body-1-light);margin:0;"),children:"Please enter a password with at least 8 characters."}),(0,i.BX)("div",{css:(0,s.iv)("display:flex;flex-direction:column;gap:24px;margin-top:24px;"),children:[(0,i.tZ)(w.I,{tabIndex:1,"aria-label":"Email",id:"email",label:"Email",labelProps:{htmlFor:"email"},name:"email",type:"email",value:d,error:Z,onChange:function(n){k(n.target.value)},onBlur:function(){return O(d)},autoFocus:!0}),(0,i.tZ)(w.I,{ref:c,tabIndex:2,"aria-label":"Your password","aria-describedby":"password-constraints",autoComplete:"new-password",id:"password",label:"Password (min. 8 characters)",labelProps:{htmlFor:"password"},title:"Your password",hide:!0,name:"new-password",value:v,onChange:function(n){m(n.target.value)}})]}),(0,i.tZ)(C.w,{disabled:!L,onNext:P,bottom:!0})]})},N=r(25358),k=function(){var n,e=(0,c.useRouter)(),r=e.query,t=e.push,a=r.step&&null!==(n=(0,N.Bx)(r.step))&&void 0!==n?n:"root";return(0,u.useMemo)(function(){return{currentStep:a,navigateTo:function(n){return t("".concat("/clear-onboarding","/").concat(n))}}},[a,t])},L=function(){var n=k().navigateTo;return(0,i.BX)("div",{css:(0,s.iv)("padding-top:80px;display:flex;flex-direction:column;"),children:[(0,i.tZ)(Z.b,{variant:"success",title:"You've unlocked a shorter onboarding with CLEAR",description:"Now, you can continue your application with fewer steps."}),(0,i.tZ)(C.w,{onNext:function(){return n("login")},bottom:!0})]})},P=[t.Success,t.ManualSuccess,t.AwaitingManualReview,],A="clearSignupData",R=function(){var n=(0,c.useRouter)().replace,e=k(),r=e.currentStep,t=e.navigateTo,a=(0,u.useState)(!1),C=a[0],Z=a[1],w=(0,m.$o)(A),y=(w?JSON.parse(w):void 0)||{},S=y.clearSessionToken,E=y.email,N=function(){return(0,m.dZ)(A)},R=function(n){var e=(0,b.zg)(n);N(),(0,d.t)({Response:"error",errorCode:e}),t(e===v.X.ClearApiRateLimitExeeded?"api-rate-error":"error")},_=(0,o.Z)((0,b.r5)(f.Vd,{onSuccess:function(n){var e=n.status,r=P.includes(e);r&&S?t("success"):(t("error"),N()),(0,d.t)({Response:r?"success":"error"})},onFailure:R}),2),D=_[0],T=_[1].isLoading,I=(0,h.t)(D),B=(0,o.Z)((0,b.r5)(f.LW,{onStart:function(){return Z(!0)},onSuccess:function(e){e?(N(),(0,l.j)("getUser",e,!1),n("/setup-investing")):(t("error"),(0,d.t)({Response:"error"}))},onFailure:R}),1)[0];return(0,u.useEffect)(function(){"root"===r&&(S?I(S):n("/signup"))},[S,r,I,n]),(0,i.tZ)(p.j,{children:C||T?(0,i.tZ)("div",{css:(0,s.iv)("width:100%;display:flex;justify-content:center;"),children:(0,i.tZ)(g.n,{})}):(0,i.BX)(i.HY,{children:["success"===r&&(0,i.tZ)(L,{}),"error"===r&&(0,i.tZ)(x,{title:"There was an error connecting to CLEAR",description:"Please try connecting again or complete your application directly on Public."}),"api-rate-error"===r&&(0,i.tZ)(x,{title:"We are experiencing heavy traffic",description:"Please try again or complete your application directly on Public."}),"login"===r&&(0,i.tZ)(O,{sessionToken:S,storedEmail:E,onLoginClearUser:B})]})})}},15371:function(n,e,r){r.d(e,{T:function(){return u},h:function(){return c}});var t=r(26042),a=r(69396),o=r(99534),i=r(35944);r(67294);var s=r(31817),c=function(n){var e=n.children,r=n.onClose,c=(0,o.Z)(n,["children","onClose"]);return(0,i.tZ)(s.Z,(0,a.Z)((0,t.Z)({closeOnEsc:!!r,defaultOpen:!0,onClose:r},c),{children:function(n){return(0,n.portal)(e)}}))},u=function(n){var e=n.children,r=n.portal,t=n.onClose;return void 0===r||r?(0,i.tZ)(c,{onClose:t,children:e}):(0,i.tZ)(i.HY,{children:"children"})}},43031:function(n,e,r){r.d(e,{T:function(){return s}});var t=r(26042),a=r(69396),o=r(35944),i=r(61111),s=function(n){return(0,o.tZ)(i.l,(0,a.Z)((0,t.Z)({displayName:"Close",boxSize:24,size:24},n),{children:(0,o.tZ)("path",{d:"M8.07106 6.65685C7.68054 6.26632 7.04737 6.26632 6.65685 6.65685C6.26632 7.04737 6.26632 7.68054 6.65685 8.07106L10.8995 12.3137L6.65685 16.5564C6.26632 16.9469 6.26632 17.58 6.65685 17.9706C7.04737 18.3611 7.68054 18.3611 8.07106 17.9706L12.3137 13.7279L16.5563 17.9706C16.9469 18.3611 17.58 18.3611 17.9706 17.9706C18.3611 17.58 18.3611 16.9469 17.9706 16.5563L13.7279 12.3137L17.9706 8.07107C18.3611 7.68055 18.3611 7.04738 17.9706 6.65686C17.58 6.26633 16.9469 6.26633 16.5563 6.65686L12.3137 10.8995L8.07106 6.65685Z"})}))}},39338:function(n,e,r){r.d(e,{w:function(){return s}});var t=r(35944),a=r(70917),o=r(1378),i=r(26264);function s(n){var e=n.bottom,r=n.className,s=n.isLoading,c=n.disabled,u=n.backButtonLabel,l=n.nextButtonLabel,d=n.nextButtonType,p=void 0===d?"button":d,g=n.skipButtonLabel,f=n.scrollButtonLabel,v=n.sticky,m=n.onBack,b=n.onNext,h=n.onSkip,C=n.onScrollClick,Z=!!b||"submit"===p,x=!!h||Z;return(0,t.BX)("div",{css:[(0,a.iv)("align-items:center;background:var(--pw-core-color-greyscale-100);display:flex;justify-content:",!m&&x?"flex-end":"space-between",";margin-bottom:80px;margin-top:40px;width:100%;z-index:9;@media (min-width:520px){margin-bottom:40px;margin-top:",void 0!==e&&e?"auto":void 0,";}"),void 0!==v&&v?(0,a.iv)("bottom:0;margin-bottom:0;padding:16px 0 80px;position:sticky;@media (min-width:520px){padding:16px 0 40px;margin-bottom:0;}"):void 0,],className:r,children:[!!m&&(0,t.tZ)(i.Rw,{clickable:!s,type:"button",size:"large",variant:"tertiary",onClick:m,children:void 0===u?"Back":u}),x&&(0,t.BX)("div",{css:(0,a.iv)("display:flex;column-gap:12px;"),children:[!!h&&(0,t.tZ)(o.zx,{css:(0,a.iv)("background:transparent;color:var(--pw-core-color-greyscale-600);padding:0 !important;@media (min-width:520px){padding:0 12px !important;width:auto;}"),size:"large",onClick:h,children:void 0===g?"Skip for now":g}),Z&&!C&&(0,t.tZ)(o.zx,{type:p,size:"large",isLoading:s,disabled:c,onClick:b,children:void 0===l?"Next":l}),C&&(0,t.tZ)(o.zx,{size:"large",onClick:C,variant:"secondary",children:void 0===f?"Scroll to agree":f})]})]})}},84071:function(n,e,r){r.d(e,{Cn:function(){return c},IJ:function(){return m},JA:function(){return g},N3:function(){return h},So:function(){return l},Xh:function(){return b},g$:function(){return v},mo:function(){return d},sj:function(){return u},tp:function(){return f}});var t=r(14924),a=r(94738),o=r(24459),i=r(83431),s=r(5006);function c(){(0,a.aN)({name:a.s6.StartedSignUp,gaParams:{event_category:"Onboarding"}})}function u(){(0,a.aN)({name:a.s6.OnboardingPhoneCodeValidated,properties:(0,t.Z)({},a.DE.OnboardingCarrotAvailable,!1),gaParams:{event_category:"Onboarding"}})}function l(n){(0,a.aN)({name:a.s6.OnboardingUserPickedCarrot,properties:(0,t.Z)({},a.DE.StockSymbol,n),gaParams:{event_category:"Onboarding"}})}function d(n,e){var r,o;(0,a.aN)({name:a.s6.OnboardingUserEncounteredError,properties:(o={},(0,t.Z)(o,a.DE.Timestamp,new Date().toJSON()),(0,t.Z)(o,a.DE.OnboardingErrorLocation,"Check if email is taken"),(0,t.Z)(o,a.DE.OnboardingErrorDescription,null!==(r=(0,s.e$)(n))&&void 0!==r?r:""),(0,t.Z)(o,a.DE.OnboardingErrorRequestData,{email:e}),o),gaParams:{event_category:"Onboarding"}})}var p=new Set;function g(n,e){p.size<5&&!p.has(e)&&(p.add(e),(0,a.aN)({name:a.s6.OnboardingLeadCapture,properties:{email:n,phone:e}}))}function f(n,e){var r;(0,a.aN)({name:a.s6.OnboardingEmail,properties:(0,t.Z)({Response:n,emailAddress:n},a.DE.OnboardingCarrotAvailable,!1),gaParams:{event_category:"Onboarding"}}),(0,a.aN)({name:a.s6.OnboardingPhoneNumber,properties:(r={},(0,t.Z)(r,a.DE.Response,e),(0,t.Z)(r,a.DE.OnboardingCarrotAvailable,!1),r),gaParams:{event_category:"Onboarding"}}),(0,a.no)("Lead")}function v(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e?(0,t.Z)({},a.X9.Referrer,"@".concat(n)):(0,t.Z)({},a.X9.ReferralCodeEntered,n);(0,a.aN)({name:a.s6.OnboardingReferralCodeEntered,properties:{code:n},traits:r,gaParams:{event_category:"Onboarding"}})}function m(){(0,a.aN)({name:a.s6.OnboardingPassword,properties:(0,t.Z)({},a.DE.OnboardingCarrotAvailable,!1),gaParams:{event_category:"Onboarding"}})}function b(){(0,a.aN)({name:a.s6.OnboardingPasswordInput,properties:(0,t.Z)({},a.DE.OnboardingCarrotAvailable,!1),gaParams:{event_category:"Onboarding"}})}function h(){var n=(0,a.Ny)();(0,o.Mq)(),(0,a.aN)({name:a.s6.SignUp,properties:n,traits:n,gaParams:{event_category:"Onboarding"}}),(0,i.JD)(i.KF.UserSignUp,{trackOnce:!0}),(0,a.no)("SubmitApplication")}},66316:function(n,e,r){r.d(e,{t:function(){return o}});var t=r(29815),a=r(67294);function o(n){var e=(0,a.useRef)(!1);return(0,a.useCallback)(function(){for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];if(!e.current)return e.current=!0,n.apply(void 0,(0,t.Z)(a))},[n])}},85951:function(n,e,r){r.d(e,{O:function(){return a}});var t=r(67294);function a(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=(0,t.useState)(n),r=e[0],a=e[1];return[r,(0,t.useCallback)(function(){return a(function(n){return!n})},[])]}}}]);